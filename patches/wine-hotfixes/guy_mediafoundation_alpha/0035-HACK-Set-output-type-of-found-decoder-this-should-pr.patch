From 691da399d3763eaf40fa2b65f8dff096f7cc0c4f Mon Sep 17 00:00:00 2001
From: Derek Lesho <dlesho@codeweavers.com>
Date: Thu, 2 Apr 2020 15:45:52 -0500
Subject: [PATCH 35/40] HACK: Set output type of found decoder, this should
 probably happen somewhere else.

---
 dlls/mf/topology.c | 1 +
 1 file changed, 1 insertion(+)

diff --git a/dlls/mf/topology.c b/dlls/mf/topology.c
index ce706a9ff7..65f562d7f1 100644
--- a/dlls/mf/topology.c
+++ b/dlls/mf/topology.c
@@ -2005,6 +2005,7 @@ static HRESULT topology_loader_resolve_branch(IMFTopologyNode *src, IMFMediaType
                         IMFTopologyNode_SetObject(node_dec, (IUnknown *)decoder);
                         IMFTopologyNode_ConnectOutput(src, 0, node_dec, 0);
                         IMFTopologyNode_ConnectOutput(node_dec, 0, sink, 0);
+                        IMFTransform_SetOutputType(decoder, 0, decoder_mtype, 0);
 
                         IMFActivate_ShutdownObject(activates_decs[i]);
                         return S_OK;
-- 
2.25.1

