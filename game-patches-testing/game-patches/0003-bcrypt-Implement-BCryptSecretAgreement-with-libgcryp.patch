From e7b6014ddfade0b33d4966da579f0f8cced59e09 Mon Sep 17 00:00:00 2001
From: Paul Gofman <gofmanp@gmail.com>
Date: Wed, 26 Feb 2020 01:05:31 +0300
Subject: [PATCH] iphlpapi: Call callback initially in
 NotifyUnicastIpAddressChange() if required.

---
 dlls/iphlpapi/iphlpapi_main.c | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/dlls/iphlpapi/iphlpapi_main.c b/dlls/iphlpapi/iphlpapi_main.c
index ce7737bee2..b8e3b20d6e 100644
--- a/dlls/iphlpapi/iphlpapi_main.c
+++ b/dlls/iphlpapi/iphlpapi_main.c
@@ -2804,6 +2804,10 @@ DWORD WINAPI NotifyUnicastIpAddressChange(ADDRESS_FAMILY family, PUNICAST_IPADDR
     FIXME("(family %d, callback %p, context %p, init_notify %d, handle %p): stub\n",
           family, callback, context, init_notify, handle);
     if (handle) *handle = NULL;
+
+    if (init_notify)
+        callback(context, NULL, MibInitialNotification);
+
     return ERROR_NOT_SUPPORTED;
 }
 
-- 
2.24.1

